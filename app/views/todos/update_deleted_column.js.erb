<% if @task.present?%>
	<% today_tasks = today_task(nil, @task.task_date, current_user) %>
	<% completed_tasks = today_tasks.completed_tasks %>
	$('#progress_<%= @task.task_date %>').html('<%= escape_javascript(render(:partial => "todos/progress_container", :locals => {f: nil, key: @task.task_date, user: current_user, today_tasks: today_tasks, completed_tasks: completed_tasks  }))%>');
	$('#navbar_menu').html('<%= escape_javascript(render(:partial => "shared/navbar_menu" ))%>');
	$("#progress_loader_<%= @task.task_date %>").empty().removeData().attr('data-percent', '<%= completed_percentage(today_tasks, completed_tasks) %>').circliful({
	    animationStep: 5,
	    foregroundBorderWidth: 70,
	    backgroundBorderWidth: 70,
	    foregroundColor: '#5fb760',
	    backgroundColor: '#ededed',
	    noPercentageSign: true,
	    fontColor: '#fff'
	});

	$('#progress_loader_<%= @task.task_date %>').children("svg").eq(0).children("circle").eq(1).css("stroke-dasharray", '<%= completed_percentage(today_tasks, completed_tasks)*3.6 %>' + ", 20000");
	<% if current_user.tasks.active_tasks.count < current_user.plan.total_tasks %>
	  $('a#add_task').each(function(data, index){
	    $(this).removeAttr('disabled');
	    $(this).removeClass('disabled');
	  });
	<% end %>	
<% elsif @thought.present? %>
	$(".ant_<%= @thought.thought_date %>").removeClass('d-none');
<% end %>
