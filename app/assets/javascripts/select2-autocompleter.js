/*
  Autocompleter that utilizes select2
 */
MentionsKinder.Autocompleter.Select2Autocompleter = MentionsKinder.Autocompleter.extend({
  select2Options: {
    data: []
  },
  initialize: function() {
    this._setupInput();
    debugger
    this.$input.on('select2-selecting', (function(_this) {
      return function(e) {
        var data;
        data = $.extend({}, {
          name: e.object.text,
          value: e.object.id
        }, e.object);
        _this.complete.call(_this, data);
        return _this.$input.select2('destroy').remove();
      };
    })(this));
    return this.$input.on('select2-close', (function(_this) {
      return function(e) {
        _this.abort.call(_this);
        return _this.$input.select2('destroy').remove();
      };
    })(this));
  },
  search: $.noop,
  _setupInput: function() {
    this.$input = $('<input type="hidden" />').css('width', this.mentionsKind.$editable.width()).appendTo(this.mentionsKind.$wrap);
    this.$input.select2(this.select2Options);
    return this.$input.select2('open');
  }
});

MentionsKinder.prototype.triggerDefaultOptions.autocompleter = MentionsKinder.Autocompleter.Select2Autocompleter;

// ---
// generated by coffee-script 1.9.2